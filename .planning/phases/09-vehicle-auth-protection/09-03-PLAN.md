---
phase: 09-vehicle-auth-protection
plan: 03
type: execute
wave: 2
depends_on:
  - 09-01
  - 09-02
files_modified: []
autonomous: false
must_haves:
  truths:
    - "Unauthenticated users are redirected to /auth/signin from all vehicle pages"
    - "No protected vehicle content flashes before redirect"
  artifacts:
    - path: "pages/vehicles/index.tsx"
      provides: "Vehicle list auth guard"
    - path: "pages/vehicles/[id]/index.tsx"
      provides: "Vehicle detail auth guard"
    - path: "pages/vehicles/new.tsx"
      provides: "Vehicle create auth guard"
    - path: "pages/vehicles/[id]/edit.tsx"
      provides: "Vehicle edit auth guard"
  key_links:
    - from: "pages/vehicles/index.tsx"
      to: "/auth/signin"
      via: "router.push in onUnauthenticated"
      pattern: "onUnauthenticated\(\).*auth/signin"
---

<objective>
Verify that all vehicle pages enforce client-side auth redirects and do not render protected content while unauthenticated.

Purpose: Confirm AUTH-04 behavior on vehicle list, detail, create, and edit pages.
Output: Human-verified redirect behavior across all vehicle routes.
</objective>

<execution_context>
@/home/bweber/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/bweber/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-vehicle-auth-protection/09-RESEARCH.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Auth guards on vehicle list, detail, create, and edit pages.</what-built>
  <how-to-verify>
    1. Open a signed-out session (incognito window recommended).
    2. Visit /vehicles and confirm you are redirected to /auth/signin without vehicle content flashing.
    3. Visit /vehicles/new and confirm the same redirect behavior.
    4. Visit /vehicles/{id} and /vehicles/{id}/edit using an existing vehicle id and confirm redirect to /auth/signin.
  </how-to-verify>
  <resume-signal>Type "approved" or describe what failed.</resume-signal>
</task>

</tasks>

<verification>
All vehicle routes redirect unauthenticated users to /auth/signin with no protected UI flashes.
</verification>

<success_criteria>

- AUTH-04 is satisfied for every vehicle page (list, detail, create, edit).
- Verification outcome recorded in the summary artifact.
  </success_criteria>

<output>
After completion, create `.planning/phases/09-vehicle-auth-protection/09-03-SUMMARY.md`
</output>
