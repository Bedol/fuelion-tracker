---
phase: 05-dashboard
plan: 03
type: execute
wave: 3
depends_on: [05-02]
files_modified:
  - pages/index.tsx
  - components/dashboard/DashboardSkeleton.tsx
  - lib/i18n/dictionaries/pl.json
  - lib/i18n/dictionaries/en.json
autonomous: true

must_haves:
  truths:
    - 'Signed-in users land on a dashboard that summarizes vehicles and recent activity'
    - 'Recent activity appears above vehicle summaries on mobile and below on desktop'
    - 'Dashboard provides clear loading and error states'
  artifacts:
    - path: 'pages/index.tsx'
      provides: 'Dashboard landing page UI'
    - path: 'components/dashboard/DashboardSkeleton.tsx'
      provides: 'Dashboard-specific loading skeleton'
    - path: 'lib/i18n/dictionaries/pl.json'
      provides: 'Polish dashboard copy'
  key_links:
    - from: 'pages/index.tsx'
      to: 'hooks/useDashboardData.ts'
      via: 'React Query hook'
      pattern: 'useDashboardData'
    - from: 'pages/index.tsx'
      to: 'components/dashboard/VehicleSummaryCard.tsx'
      via: 'render vehicle summaries'
      pattern: 'VehicleSummaryCard'
---

<objective>
Replace the placeholder home page with the full dashboard layout and copy.

Purpose: Deliver the Phase 5 user-facing dashboard experience.
Output: Dashboard page UI with responsive ordering, loading/error states, and localized labels.
</objective>

<execution_context>
@/home/bweber/.config/opencode/get-shit-done/workflows/execute-plan.md
@/home/bweber/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-dashboard/05-CONTEXT.md

@pages/index.tsx
@components/ui/SkeletonLoader.tsx
@components/errors/FetchDataErrorAlert.tsx
@hooks/useDashboardData.ts
@components/dashboard/VehicleSummaryCard.tsx
@components/dashboard/RecentActivityList.tsx
@lib/i18n/dictionaries/pl.json
@lib/i18n/dictionaries/en.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add dashboard translation strings</name>
  <files>lib/i18n/dictionaries/pl.json, lib/i18n/dictionaries/en.json</files>
  <action>
Add a `dashboard` section with keys for:
- title, subtitle
- vehiclesTitle, activityTitle
- totalSpent, averageConsumption, totalDistance, lastFueling
- viewVehicle, quickAdd
- emptyVehiclesTitle, emptyVehiclesDescription, emptyVehiclesCta
- emptyActivityTitle, emptyActivityDescription

Use clear, short labels that match existing tone. Keep Polish as the default locale.
</action>
<verify>Confirm new dashboard keys resolve via `t('dashboard.*')` in `pages/index.tsx`.</verify>
<done>Dashboard copy is available in both `pl` and `en` dictionaries.</done>
</task>

<task type="auto">
  <name>Task 2: Build the dashboard page layout and loading states</name>
  <files>pages/index.tsx, components/dashboard/DashboardSkeleton.tsx</files>
  <action>
Replace the placeholder in `pages/index.tsx` with the dashboard UI:
- keep `useSession({ required: true })` and redirect to `/auth/signin` on unauthenticated
- use `useDashboardData` for API data
- show a dashboard-specific skeleton (`DashboardSkeleton`) while auth or data is loading
- show `FetchDataErrorAlert` on query error

Layout requirements from context:

- Desktop: two-column above the fold, activity section full-width below
- Mobile: recent activity section first, vehicles section below
- Sections are card-based with headers and airy spacing

Implement the layout with Chakra `Stack`, `SimpleGrid`, and `CardRoot`:

- render `RecentActivityList` and `VehicleSummaryCard` sections with responsive ordering (e.g., `order` props)
- vehicles are alphabetically ordered already by the API
- vehicles with no fuelings should display zero values (handled by API) without empty placeholders
- recent activity list should render empty state when no activity exists
- provide an empty vehicles state with a CTA button to `/vehicles/new`

Create `components/dashboard/DashboardSkeleton.tsx` to show section-level skeletons that mirror the two-column + full-width structure.
</action>
<verify>Run `npm run lint` and visually confirm responsive ordering on desktop vs mobile.</verify>
<done>Home page renders the full dashboard with proper loading, error, empty states, and responsive ordering.</done>
</task>

</tasks>

<verification>
- `npm run lint`
- Load `/` while signed in and confirm vehicles + recent activity render with correct ordering
</verification>

<success_criteria>

- Dashboard replaces the placeholder welcome view and meets Phase 5 success criteria.
- Mobile and desktop layouts match the specified ordering and section structure.
  </success_criteria>

<output>
After completion, create `.planning/phases/05-dashboard/05-03-SUMMARY.md`
</output>
